<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signal Scout - Roblox Game Finder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0e14;
            color: #c5c9d1;
            overflow-x: hidden;
        }

        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #0a0e14;
        }

        .login-box {
            background: #151b24;
            border: 1px solid #1f2937;
            border-radius: 8px;
            padding: 40px;
            width: 400px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-header h1 {
            color: #00d4ff;
            font-size: 28px;
            margin-bottom: 8px;
            letter-spacing: 1px;
        }

        .login-header p {
            color: #6b7280;
            font-size: 14px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #9ca3af;
            font-size: 14px;
        }

        .input-group input {
            width: 100%;
            padding: 12px;
            background: #0a0e14;
            border: 1px solid #1f2937;
            border-radius: 4px;
            color: #c5c9d1;
            font-size: 14px;
        }

        .input-group input:focus {
            outline: none;
            border-color: #00d4ff;
        }

        .login-btn {
            width: 100%;
            padding: 12px;
            background: #00d4ff;
            color: #0a0e14;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        .login-btn:hover {
            background: #00b8e6;
        }

        .error-message {
            background: #dc2626;
            color: white;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 20px;
            font-size: 14px;
            display: none;
        }

        .dashboard {
            display: none;
            min-height: 100vh;
        }

        .topbar {
            background: #151b24;
            border-bottom: 1px solid #1f2937;
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .topbar-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logo {
            font-size: 22px;
            font-weight: 700;
            color: #00d4ff;
            letter-spacing: 1px;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            background: #0a0e14;
            border-radius: 4px;
            font-size: 13px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10b981;
        }

        .topbar-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-info {
            color: #9ca3af;
            font-size: 14px;
        }

        .logout-btn {
            padding: 8px 16px;
            background: #dc2626;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
        }

        .logout-btn:hover {
            background: #b91c1c;
        }

        .main-container {
            display: flex;
        }

        .sidebar {
            width: 60px;
            background: #151b24;
            border-right: 1px solid #1f2937;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 0;
            gap: 15px;
            transition: width 0.3s;
        }

        .sidebar.expanded {
            width: 250px;
        }

        .sidebar-btn {
            width: 40px;
            height: 40px;
            background: #0a0e14;
            border: 1px solid #1f2937;
            border-radius: 6px;
            color: #9ca3af;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s;
        }

        .sidebar-btn:hover {
            background: #1f2937;
            color: #00d4ff;
            border-color: #00d4ff;
        }

        .sidebar-btn.active {
            background: #00d4ff;
            color: #0a0e14;
            border-color: #00d4ff;
        }

        .content {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            max-height: calc(100vh - 60px);
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .section-header {
            margin-bottom: 25px;
        }

        .section-header h2 {
            font-size: 24px;
            color: #00d4ff;
            margin-bottom: 8px;
        }

        .section-header p {
            color: #9ca3af;
            font-size: 14px;
        }

        .card {
            background: #151b24;
            border: 1px solid #1f2937;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #1f2937;
        }

        .card-title {
            font-size: 16px;
            font-weight: 600;
            color: #c5c9d1;
        }

        .btn {
            padding: 10px 20px;
            background: #00d4ff;
            color: #0a0e14;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #00b8e6;
        }

        .btn:disabled {
            background: #374151;
            cursor: not-allowed;
            color: #6b7280;
        }

        .btn-secondary {
            background: #374151;
            color: #c5c9d1;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .btn-danger {
            background: #dc2626;
            color: white;
        }

        .btn-danger:hover {
            background: #b91c1c;
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .config-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .config-item label {
            color: #9ca3af;
            font-size: 13px;
            font-weight: 500;
        }

        .config-item input {
            padding: 10px;
            background: #0a0e14;
            border: 1px solid #1f2937;
            border-radius: 4px;
            color: #c5c9d1;
            font-size: 14px;
        }

        .config-item input:focus {
            outline: none;
            border-color: #00d4ff;
        }

        .keywords-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 15px;
            background: #0a0e14;
            border: 1px solid #1f2937;
            border-radius: 4px;
            min-height: 80px;
        }

        .keyword-tag {
            padding: 6px 12px;
            background: #1f2937;
            border: 1px solid #374151;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }

        .keyword-tag button {
            background: none;
            border: none;
            color: #dc2626;
            cursor: pointer;
            font-size: 16px;
            padding: 0;
            line-height: 1;
        }

        .add-keyword-input {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .add-keyword-input input {
            flex: 1;
            padding: 10px;
            background: #0a0e14;
            border: 1px solid #1f2937;
            border-radius: 4px;
            color: #c5c9d1;
        }

        .scan-log {
            background: #0a0e14;
            border: 1px solid #1f2937;
            border-radius: 4px;
            padding: 15px;
            height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
        }

        .log-entry {
            margin-bottom: 5px;
            color: #9ca3af;
        }

        .log-entry.success {
            color: #10b981;
        }

        .log-entry.error {
            color: #dc2626;
        }

        .log-entry.info {
            color: #00d4ff;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: #0a0e14;
            border: 1px solid #1f2937;
            border-radius: 6px;
            padding: 15px;
        }

        .stat-label {
            color: #9ca3af;
            font-size: 12px;
            margin-bottom: 5px;
        }

        .stat-value {
            color: #00d4ff;
            font-size: 24px;
            font-weight: 700;
        }

        .games-table {
            width: 100%;
            border-collapse: collapse;
        }

        .games-table thead {
            background: #0a0e14;
        }

        .games-table th {
            padding: 12px;
            text-align: left;
            font-size: 13px;
            font-weight: 600;
            color: #9ca3af;
            border-bottom: 1px solid #1f2937;
        }

        .games-table td {
            padding: 12px;
            border-bottom: 1px solid #1f2937;
            font-size: 13px;
        }

        .games-table tr:hover {
            background: #0a0e14;
        }

        .score-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .score-high {
            background: #10b981;
            color: #0a0e14;
        }

        .score-medium {
            background: #f59e0b;
            color: #0a0e14;
        }

        .score-low {
            background: #6b7280;
            color: #0a0e14;
        }

        .game-actions {
            display: flex;
            gap: 5px;
        }

        .icon-btn {
            padding: 5px 10px;
            background: #374151;
            border: none;
            border-radius: 4px;
            color: #c5c9d1;
            cursor: pointer;
            font-size: 12px;
        }

        .icon-btn:hover {
            background: #4b5563;
        }

        .filter-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-bar input,
        .filter-bar select {
            padding: 10px;
            background: #0a0e14;
            border: 1px solid #1f2937;
            border-radius: 4px;
            color: #c5c9d1;
            font-size: 13px;
        }

        .filter-bar input {
            flex: 1;
            min-width: 200px;
        }

        .notes-textarea {
            width: 100%;
            min-height: 150px;
            padding: 12px;
            background: #0a0e14;
            border: 1px solid #1f2937;
            border-radius: 4px;
            color: #c5c9d1;
            font-size: 14px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            resize: vertical;
        }

        .notes-textarea:focus {
            outline: none;
            border-color: #00d4ff;
        }

        .alert {
            padding: 12px 15px;
            border-radius: 4px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }

        .alert-success {
            background: #10b981;
            color: #0a0e14;
        }

        .alert-warning {
            background: #f59e0b;
            color: #0a0e14;
        }

        .alert-error {
            background: #dc2626;
            color: white;
        }

        .alert-info {
            background: #00d4ff;
            color: #0a0e14;
        }

        .side-panel {
            position: fixed;
            right: -350px;
            top: 0;
            width: 350px;
            height: 100vh;
            background: #151b24;
            border-left: 1px solid #1f2937;
            transition: right 0.3s;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }

        .side-panel.open {
            right: 0;
        }

        .panel-header {
            padding: 20px;
            border-bottom: 1px solid #1f2937;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-header h3 {
            color: #00d4ff;
            font-size: 18px;
        }

        .close-panel {
            background: none;
            border: none;
            color: #9ca3af;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }

        .close-panel:hover {
            color: #00d4ff;
        }

        .panel-content {
            padding: 20px;
            overflow-y: auto;
            flex: 1;
        }

        .calc-section {
            margin-bottom: 25px;
        }

        .calc-section h4 {
            color: #c5c9d1;
            font-size: 15px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #1f2937;
        }

        .calc-input {
            margin-bottom: 15px;
        }

        .calc-input label {
            display: block;
            color: #9ca3af;
            font-size: 13px;
            margin-bottom: 5px;
        }

        .calc-input input {
            width: 100%;
            padding: 10px;
            background: #0a0e14;
            border: 1px solid #1f2937;
            border-radius: 4px;
            color: #c5c9d1;
            font-size: 14px;
        }

        .calc-result {
            padding: 15px;
            background: #0a0e14;
            border: 1px solid #1f2937;
            border-radius: 4px;
            margin-top: 15px;
        }

        .calc-result-label {
            color: #9ca3af;
            font-size: 12px;
            margin-bottom: 5px;
        }

        .calc-result-value {
            color: #00d4ff;
            font-size: 20px;
            font-weight: 700;
        }

        .toggle-panel-btn {
            position: fixed;
            right: 20px;
            bottom: 20px;
            width: 50px;
            height: 50px;
            background: #00d4ff;
            border: none;
            border-radius: 50%;
            color: #0a0e14;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3);
            transition: all 0.3s;
            z-index: 999;
        }

        .toggle-panel-btn:hover {
            background: #00b8e6;
            transform: scale(1.1);
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6b7280;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .empty-state h3 {
            font-size: 18px;
            margin-bottom: 10px;
            color: #9ca3af;
        }

        .empty-state p {
            font-size: 14px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #1f2937;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: #00d4ff;
            transition: width 0.3s;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal.open {
            display: flex;
        }

        .modal-content {
            background: #151b24;
            border: 1px solid #1f2937;
            border-radius: 8px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            color: #00d4ff;
            font-size: 20px;
        }

        .modal-body {
            margin-bottom: 20px;
        }

        .modal-footer {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0a0e14;
        }

        ::-webkit-scrollbar-thumb {
            background: #374151;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #4b5563;
        }
    </style>
</head>
<body>
    <div class="login-container" id="loginContainer">
        <div class="login-box">
            <div class="login-header">
                <h1>SIGNAL SCOUT</h1>
                <p>Roblox Game Finder Dashboard</p>
            </div>
            <div class="error-message" id="loginError">Invalid password</div>
            <form id="loginForm">
                <div class="input-group">
                    <label>Password</label>
                    <input type="password" id="passwordInput" placeholder="Enter your password" required>
                </div>
                <button type="submit" class="login-btn">Access Dashboard</button>
            </form>
        </div>
    </div>

    <div class="dashboard" id="dashboard">
        <div class="topbar">
            <div class="topbar-left">
                <div class="logo">SIGNAL SCOUT</div>
                <div class="status-indicator">
                    <span class="status-dot"></span>
                    <span id="statusText">Ready</span>
                </div>
            </div>
            <div class="topbar-right">
                <span class="user-info" id="userInfo">Session Active</span>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </div>

        <div class="main-container">
            <div class="sidebar" id="sidebar">
                <button class="sidebar-btn active" onclick="showSection('dashboard')" title="Dashboard">St</button>
                <button class="sidebar-btn" onclick="showSection('scanner')" title="Scanner">S</button>
                <button class="sidebar-btn" onclick="showSection('results')" title="Results">R</button>
                <button class="sidebar-btn" onclick="showSection('config')" title="Config">C</button>
                <button class="sidebar-btn" onclick="showSection('notes')" title="Notes">N</button>
            </div>

            <div class="content">
                <div class="section active" id="section-dashboard">
                    <div class="section-header">
                        <h2>Dashboard</h2>
                        <p>Overview of your scanning activity</p>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Total Scans</div>
                            <div class="stat-value" id="statTotalScans">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Games Found</div>
                            <div class="stat-value" id="statGamesFound">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">High Score Games</div>
                            <div class="stat-value" id="statHighScore">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Last Scan</div>
                            <div class="stat-value" id="statLastScan" style="font-size: 16px;">Never</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Recent Activity</div>
                        </div>
                        <div id="recentActivity">
                            <div class="empty-state">
                                <div class="empty-state-icon"></div>
                                <h3>No Activity Yet</h3>
                                <p>Start a scan to see results here</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section" id="section-scanner">
                    <div class="section-header">
                        <h2>Scanner</h2>
                        <p>Run scans to find Roblox games</p>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Scan Controls</div>
                            <button class="btn" id="startScanBtn" onclick="startScan()">Start Scan</button>
                        </div>
                        <div id="scanProgress" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                            </div>
                            <p id="progressText" style="color: #9ca3af; font-size: 13px; margin-bottom: 15px;">Initializing...</p>
                        </div>
                        <div class="scan-log" id="scanLog">
                            <div class="log-entry info">Ready to scan. Click 'Start Scan' to begin.</div>
                        </div>
                    </div>
                </div>

                <div class="section" id="section-results">
                    <div class="section-header">
                        <h2>Results</h2>
                        <p>View and manage found games</p>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Filter Results</div>
                            <button class="btn btn-secondary" onclick="exportResults()">Export CSV</button>
                        </div>
                        <div class="filter-bar">
                            <input type="text" id="searchFilter" placeholder="Search games..." oninput="filterResults()">
                            <select id="scoreFilter" onchange="filterResults()">
                                <option value="all">All Scores</option>
                                <option value="high">High (0.6+)</option>
                                <option value="medium">Medium (0.4-0.6)</option>
                                <option value="low">Low (<0.4)</option>
                            </select>
                            <select id="sortFilter" onchange="filterResults()">
                                <option value="score">Sort by Score</option>
                                <option value="ccu">Sort by CCU</option>
                                <option value="age">Sort by Age</option>
                                <option value="growth">Sort by Growth</option>
                            </select>
                        </div>
                    </div>

                    <div class="card">
                        <div style="overflow-x: auto;">
                            <table class="games-table" id="resultsTable">
                                <thead>
                                    <tr>
                                        <th>Rank</th>
                                        <th>Game Title</th>
                                        <th>Score</th>
                                        <th>CCU</th>
                                        <th>Age</th>
                                        <th>Growth</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="resultsTableBody">
                                    <tr>
                                        <td colspan="7">
                                            <div class="empty-state">
                                                <div class="empty-state-icon"></div>
                                                <h3>No Results Yet</h3>
                                                <p>Run a scan to find games</p>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="section" id="section-config">
                    <div class="section-header">
                        <h2>Configuration</h2>
                        <p>Customize scan parameters</p>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Scan Parameters</div>
                            <button class="btn" onclick="saveConfig()">Save Configuration</button>
                        </div>
                        <div class="config-grid">
                            <div class="config-item">
                                <label>Min Game Age (Days)</label>
                                <input type="number" id="minAge" value="1">
                            </div>
                            <div class="config-item">
                                <label>Max Game Age (Days)</label>
                                <input type="number" id="maxAge" value="45">
                            </div>
                            <div class="config-item">
                                <label>Min CCU</label>
                                <input type="number" id="minCCU" value="30">
                            </div>
                            <div class="config-item">
                                <label>Max CCU</label>
                                <input type="number" id="maxCCU" value="950">
                            </div>
                            <div class="config-item">
                                <label>Min Total Plays</label>
                                <input type="number" id="minPlays" value="100">
                            </div>
                            <div class="config-item">
                                <label>Max Total Plays</label>
                                <input type="number" id="maxPlays" value="100000">
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Search Keywords</div>
                        </div>
                        <div class="keywords-container" id="keywordsContainer"></div>
                        <div class="add-keyword-input">
                            <input type="text" id="newKeyword" placeholder="Enter new keyword">
                            <button class="btn" onclick="addKeyword()">Add Keyword</button>
                        </div>
                    </div>
                </div>

                <div class="section" id="section-notes">
                    <div class="section-header">
                        <h2>Notes</h2>
                        <p>Keep track of important information</p>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">General Notes</div>
                            <button class="btn" onclick="saveNotes()">Save Notes</button>
                        </div>
                        <textarea class="notes-textarea" id="generalNotes" placeholder="Type your notes here..."></textarea>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Game-Specific Notes</div>
                        </div>
                        <div id="gameNotesList">
                            <div class="empty-state">
                                <div class="empty-state-icon">N</div>
                                <h3>No Game Notes</h3>
                                <p>Add notes from the results page</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <button class="toggle-panel-btn" onclick="togglePanel()">D</button>

    <div class="side-panel" id="sidePanel">
        <div class="panel-header">
            <h3>Dev Calculator</h3>
            <button class="close-panel" onclick="togglePanel()">×</button>
        </div>
        <div class="panel-content">
            <div class="calc-section">
                <h4>ROI Calculator</h4>
                <div class="calc-input">
                    <label>Purchase Price ($)</label>
                    <input type="number" id="purchasePrice" value="0" oninput="calculateROI()">
                </div>
                <div class="calc-input">
                    <label>Monthly Revenue ($)</label>
                    <input type="number" id="monthlyRevenue" value="0" oninput="calculateROI()">
                </div>
                <div class="calc-input">
                    <label>Monthly Costs ($)</label>
                    <input type="number" id="monthlyCosts" value="0" oninput="calculateROI()">
                </div>
                <div class="calc-result">
                    <div class="calc-result-label">Payback Period</div>
                    <div class="calc-result-value" id="paybackPeriod">0 months</div>
                </div>
                <div class="calc-result">
                    <div class="calc-result-label">Annual ROI</div>
                    <div class="calc-result-value" id="annualROI">0%</div>
                </div>
            </div>

            <div class="calc-section">
                <h4>Growth Projector</h4>
                <div class="calc-input">
                    <label>Current Daily Plays</label>
                    <input type="number" id="currentPlays" value="0" oninput="calculateGrowth()">
                </div>
                <div class="calc-input">
                    <label>Growth Rate (%)</label>
                    <input type="number" id="growthRate" value="5" oninput="calculateGrowth()">
                </div>
                <div class="calc-input">
                    <label>Projection Days</label>
                    <input type="number" id="projectionDays" value="30" oninput="calculateGrowth()">
                </div>
                <div class="calc-result">
                    <div class="calc-result-label">Projected Plays</div>
                    <div class="calc-result-value" id="projectedPlays">0</div>
                </div>
            </div>

            <div class="calc-section">
                <h4>Value Estimator</h4>
                <div class="calc-input">
                    <label>Total Plays</label>
                    <input type="number" id="valuePlays" value="0" oninput="calculateValue()">
                </div>
                <div class="calc-input">
                    <label>CCU</label>
                    <input type="number" id="valueCCU" value="0" oninput="calculateValue()">
                </div>
                <div class="calc-input">
                    <label>Game Age (Days)</label>
                    <input type="number" id="valueAge" value="0" oninput="calculateValue()">
                </div>
                <div class="calc-result">
                    <div class="calc-result-label">Estimated Value</div>
                    <div class="calc-result-value" id="estimatedValue">$0</div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="gameModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalGameTitle">Game Details</h3>
                <button class="close-panel" onclick="closeModal()">×</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">Close</button>
                <button class="btn" onclick="openGameURL()">Open Game</button>
            </div>
        </div>
    </div>

    <script>
         <script src="config.js"></script>
        const CORRECT_PASSWORD = 'magwazhere2026scout';
        
        // Debug: Log password attempts
        console.log('Dashboard loaded. Correct password is: magwazhere2026scout');
        
        let scanData = {
            config: {
                minAge: 1,
                maxAge: 45,
                minCCU: 30,
                maxCCU: 950,
                minPlays: 100,
                maxPlays: 100000,
                keywords: ['brainrot', 'find the', 'escape', 'destroy', 'break', 'FPS', 'HORROR', 'craft', 'build', 'challenge', '2 player obby']
            },
            results: [],
            notes: {
                general: '',
                games: {}
            },
            stats: {
                totalScans: 0,
                gamesFound: 0,
                highScoreGames: 0,
                lastScan: null
            }
        };

        let currentGameURL = '';

        function loadData() {
            try {
                const saved = localStorage.getItem('signalScoutData');
                if (saved) {
                    scanData = JSON.parse(saved);
                    updateAllDisplays();
                }
            } catch (e) {
                console.error('Error loading data:', e);
            }
        }

        function saveData() {
            try {
                localStorage.setItem('signalScoutData', JSON.stringify(scanData));
            } catch (e) {
                console.error('Error saving data:', e);
            }
        }

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const password = document.getElementById('passwordInput').value;
            
            if (password === CORRECT_PASSWORD) {
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                loadData();
                renderKeywords();
                updateStats();
            } else {
                document.getElementById('loginError').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('loginError').style.display = 'none';
                }, 3000);
            }
        });

        function logout() {
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('loginContainer').style.display = 'flex';
            document.getElementById('passwordInput').value = '';
        }

        function showSection(section) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.sidebar-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById('section-' + section).classList.add('active');
            event.target.classList.add('active');
        }

        function togglePanel() {
            document.getElementById('sidePanel').classList.toggle('open');
        }

        function renderKeywords() {
            const container = document.getElementById('keywordsContainer');
            container.innerHTML = '';
            
            scanData.config.keywords.forEach((keyword, index) => {
                const tag = document.createElement('div');
                tag.className = 'keyword-tag';
                tag.innerHTML = `
                    ${keyword}
                    <button onclick="removeKeyword(${index})">×</button>
                `;
                container.appendChild(tag);
            });
        }

        function addKeyword() {
            const input = document.getElementById('newKeyword');
            const keyword = input.value.trim();
            
            if (keyword && !scanData.config.keywords.includes(keyword)) {
                scanData.config.keywords.push(keyword);
                renderKeywords();
                saveData();
                input.value = '';
                showAlert('Keyword added successfully', 'success');
            }
        }

        function removeKeyword(index) {
            scanData.config.keywords.splice(index, 1);
            renderKeywords();
            saveData();
            showAlert('Keyword removed', 'info');
        }

        function saveConfig() {
            scanData.config.minAge = parseInt(document.getElementById('minAge').value);
            scanData.config.maxAge = parseInt(document.getElementById('maxAge').value);
            scanData.config.minCCU = parseInt(document.getElementById('minCCU').value);
            scanData.config.maxCCU = parseInt(document.getElementById('maxCCU').value);
            scanData.config.minPlays = parseInt(document.getElementById('minPlays').value);
            scanData.config.maxPlays = parseInt(document.getElementById('maxPlays').value);
            
            saveData();
            showAlert('Configuration saved successfully', 'success');
        }

        function saveNotes() {
            scanData.notes.general = document.getElementById('generalNotes').value;
            saveData();
            showAlert('Notes saved successfully', 'success');
        }

        function updateAllDisplays() {
            document.getElementById('minAge').value = scanData.config.minAge;
            document.getElementById('maxAge').value = scanData.config.maxAge;
            document.getElementById('minCCU').value = scanData.config.minCCU;
            document.getElementById('maxCCU').value = scanData.config.maxCCU;
            document.getElementById('minPlays').value = scanData.config.minPlays;
            document.getElementById('maxPlays').value = scanData.config.maxPlays;
            document.getElementById('generalNotes').value = scanData.notes.general;
            
            renderResults();
            updateStats();
        }

        async function startScan() {
            const btn = document.getElementById('startScanBtn');
            btn.disabled = true;
            btn.textContent = 'Scanning...';
            
            const log = document.getElementById('scanLog');
            const progress = document.getElementById('scanProgress');
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            
            log.innerHTML = '';
            progress.style.display = 'block';
            
            addLog('Connecting to backend server...', 'info');
            addLog(`Age range: ${scanData.config.minAge}-${scanData.config.maxAge} days`, 'info');
            addLog(`CCU range: ${scanData.config.minCCU}-${scanData.config.maxCCU}`, 'info');
            addLog(`Searching ${scanData.config.keywords.length} keywords`, 'info');
            
            progressFill.style.width = '10%';
            progressText.textContent = 'Sending request to Python backend...';
            
            try {
                addLog('Starting Python scan process...', 'info');
                progressFill.style.width = '30%';
                
const response = await fetch('https://semimountainously-leptospiral-samir.ngrok-free.dev/api/scan', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'ngrok-skip-browser-warning': '69420',
        'User-Agent': 'Mozilla/5.0'
    },
    body: JSON.stringify(scanData.config)
});
                
                if (!response.ok) {
                    throw new Error('Backend server not responding');
                }
                
                progressFill.style.width = '60%';
                progressText.textContent = 'Processing results...';
                
                const data = await response.json();
                
                progressFill.style.width = '100%';
                progressText.textContent = 'Scan completed!';
                
                if (data.success) {
                    addLog('Received results from backend', 'success');
                    
                    scanData.results = data.results;
                    scanData.stats.totalScans++;
                    scanData.stats.gamesFound = data.results.length;
                    scanData.stats.highScoreGames = data.results.filter(g => parseFloat(g.buy_readiness_score || g.score) >= 0.6).length;
                    scanData.stats.lastScan = new Date().toLocaleString();
                    
                    saveData();
                    renderResults();
                    updateStats();
                    
                    addLog(`Scan complete! Found ${data.results.length} games`, 'success');
                    addLog(`High score games: ${scanData.stats.highScoreGames}`, 'success');
                    
                    showAlert(`Scan completed! Found ${data.results.length} games`, 'success');
                } else {
                    throw new Error('Scan failed');
                }
                
            } catch (error) {
                addLog('ERROR: Could not connect to backend server', 'error');
                addLog('Make sure Python backend is running on http://localhost:5000', 'error');
                addLog(`Error: ${error.message}`, 'error');
                showAlert('Backend server not running. Start backend.py first!', 'error');
                progressFill.style.width = '0%';
            } finally {
                btn.disabled = false;
                btn.textContent = 'Start Scan';
            }
        }

        function addLog(message, type = 'info') {
            const log = document.getElementById('scanLog');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            const timestamp = new Date().toLocaleTimeString();
            entry.textContent = `[${timestamp}] ${message}`;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        function renderResults() {
            const tbody = document.getElementById('resultsTableBody');
            
            if (scanData.results.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7">
                            <div class="empty-state">
                                <div class="empty-state-icon"></div>
                                <h3>No Results Yet</h3>
                                <p>Run a scan to find games</p>
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = '';
            scanData.results.forEach((game, index) => {
                const score = parseFloat(game.buy_readiness_score || game.score || 0);
                const scoreClass = score >= 0.6 ? 'score-high' : 
                                 score >= 0.4 ? 'score-medium' : 'score-low';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${game.title}</td>
                    <td><span class="score-badge ${scoreClass}">${score.toFixed(3)}</span></td>
                    <td>${game.ccu}</td>
                    <td>${game.days_old || game.age}d</td>
                    <td>${(game.growth_rate || game.growth || 0).toLocaleString()}/day</td>
                    <td class="game-actions">
                        <button class="icon-btn" onclick="viewGame(${index})">View</button>
                        <button class="icon-btn" onclick="addGameNote(${index})">Note</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function filterResults() {
            const search = document.getElementById('searchFilter').value.toLowerCase();
            const scoreFilter = document.getElementById('scoreFilter').value;
            const sortBy = document.getElementById('sortFilter').value;
            
            let filtered = scanData.results.filter(game => {
                const matchesSearch = game.title.toLowerCase().includes(search);
                
                let matchesScore = true;
                if (scoreFilter === 'high') matchesScore = parseFloat(game.score) >= 0.6;
                else if (scoreFilter === 'medium') matchesScore = parseFloat(game.score) >= 0.4 && parseFloat(game.score) < 0.6;
                else if (scoreFilter === 'low') matchesScore = parseFloat(game.score) < 0.4;
                
                return matchesSearch && matchesScore;
            });
            
            filtered.sort((a, b) => {
                switch(sortBy) {
                    case 'score': return parseFloat(b.score) - parseFloat(a.score);
                    case 'ccu': return b.ccu - a.ccu;
                    case 'age': return a.age - b.age;
                    case 'growth': return b.growth - a.growth;
                    default: return 0;
                }
            });
            
            const tbody = document.getElementById('resultsTableBody');
            tbody.innerHTML = '';
            
            filtered.forEach((game, index) => {
                const scoreClass = parseFloat(game.score) >= 0.6 ? 'score-high' : 
                                 parseFloat(game.score) >= 0.4 ? 'score-medium' : 'score-low';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${game.title}</td>
                    <td><span class="score-badge ${scoreClass}">${game.score}</span></td>
                    <td>${game.ccu}</td>
                    <td>${game.age}d</td>
                    <td>${game.growth.toLocaleString()}/day</td>
                    <td class="game-actions">
                        <button class="icon-btn" onclick="viewGame(${scanData.results.indexOf(game)})">View</button>
                        <button class="icon-btn" onclick="addGameNote(${scanData.results.indexOf(game)})">Note</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

function viewGame(index) {
            const game = scanData.results[index];
            currentGameURL = game.url;
            
            const score = parseFloat(game.buy_readiness_score || game.score || 0);
            const growth = game.growth_metrics || {};
            const ccuStats = game.ccu_stats;
            
            let modalHTML = `
                <div style="margin-bottom: 15px;">
                    <strong style="color: #9ca3af;">Buy Readiness Score:</strong><br>
                    <span style="color: #00d4ff; font-size: 20px; font-weight: 700;">${score.toFixed(3)}</span>
                </div>
                <div style="margin-bottom: 15px;">
                    <strong style="color: #9ca3af;">Current CCU:</strong><br>
                    <span style="color: #c5c9d1;">${game.ccu} players</span>
                </div>`;
            
            if (ccuStats) {
                modalHTML += `
                <div style="margin-bottom: 15px;">
                    <strong style="color: #9ca3af;">CCU Range:</strong><br>
                    <span style="color: #c5c9d1;">${ccuStats.min}-${ccuStats.max} (avg ${Math.round(ccuStats.avg)}, ${ccuStats.readings} readings)</span>
                </div>`;
            }
            
            modalHTML += `
                <div style="margin-bottom: 15px;">
                    <strong style="color: #9ca3af;">Total Plays:</strong><br>
                    <span style="color: #c5c9d1;">${(game.total_plays || 0).toLocaleString()}</span>
                </div>
                <div style="margin-bottom: 15px;">
                    <strong style="color: #9ca3af;">Age:</strong><br>
                    <span style="color: #c5c9d1;">${game.days_old || game.age} days (created ${game.created || 'unknown'})</span>
                </div>
                <div style="margin-bottom: 15px;">
                    <strong style="color: #9ca3af;">Daily Growth:</strong><br>
                    <span style="color: #c5c9d1;">${(growth.daily_average || game.growth_rate || 0).toLocaleString()} plays/day</span>
                </div>`;
            
            if (growth.composite_growth) {
                modalHTML += `
                <div style="margin-bottom: 15px;">
                    <strong style="color: #9ca3af;">Growth Metrics:</strong><br>
                    <span style="color: #c5c9d1;">Composite: ${growth.composite_growth}</span><br>
                    <span style="color: #c5c9d1;">Velocity: ${growth.velocity_score}</span><br>
                    <span style="color: #c5c9d1;">Momentum: ${growth.momentum_score}</span>
                </div>`;
            }
            
            if (game.trend_score) {
                modalHTML += `
                <div style="margin-bottom: 15px;">
                    <strong style="color: #9ca3af;">Trend Score:</strong><br>
                    <span style="color: #c5c9d1;">${game.trend_score} - ${game.keywords.join(', ')}</span>
                </div>`;
            }
            
            if (game.creator_name) {
                modalHTML += `
                <div style="margin-bottom: 15px;">
                    <strong style="color: #9ca3af;">Creator:</strong><br>
                    <span style="color: #c5c9d1;">${game.creator_name} (${game.creator_type})</span>`;
                if (game.creator_link) {
                    modalHTML += `<br><a href="${game.creator_link}" target="_blank" style="color: #00d4ff;">View Creator</a>`;
                }
                modalHTML += `</div>`;
            }
            
            modalHTML += `
                <div style="margin-bottom: 15px;">
                    <strong style="color: #9ca3af;">Found Via:</strong><br>
                    <span style="color: #c5c9d1;">${game.found_via || 'search'}</span>
                </div>`;
            
            document.getElementById('modalGameTitle').textContent = game.title;
            document.getElementById('modalBody').innerHTML = modalHTML;
            document.getElementById('gameModal').classList.add('open');
        }

        function closeModal() {
            document.getElementById('gameModal').classList.remove('open');
        }

        function openGameURL() {
            if (currentGameURL) {
                window.open(currentGameURL, '_blank');
            }
        }

        function addGameNote(index) {
            const game = scanData.results[index];
            const note = prompt(`Add note for "${game.title}":`);
            
            if (note) {
                scanData.notes.games[game.title] = note;
                saveData();
                showAlert('Note added successfully', 'success');
                updateGameNotesList();
            }
        }

        function updateGameNotesList() {
            const container = document.getElementById('gameNotesList');
            const notes = Object.entries(scanData.notes.games);
            
            if (notes.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">N</div>
                        <h3>No Game Notes</h3>
                        <p>Add notes from the results page</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            notes.forEach(([title, note]) => {
                const noteCard = document.createElement('div');
                noteCard.className = 'card';
                noteCard.innerHTML = `
                    <div class="card-header">
                        <div class="card-title">${title}</div>
                        <button class="btn btn-danger" style="padding: 5px 10px; font-size: 12px;" onclick="deleteGameNote('${title}')">Delete</button>
                    </div>
                    <p style="color: #c5c9d1;">${note}</p>
                `;
                container.appendChild(noteCard);
            });
        }

        function deleteGameNote(title) {
            if (confirm(`Delete note for "${title}"?`)) {
                delete scanData.notes.games[title];
                saveData();
                updateGameNotesList();
                showAlert('Note deleted', 'info');
            }
        }

        function updateStats() {
            document.getElementById('statTotalScans').textContent = scanData.stats.totalScans;
            document.getElementById('statGamesFound').textContent = scanData.stats.gamesFound;
            document.getElementById('statHighScore').textContent = scanData.stats.highScoreGames;
            document.getElementById('statLastScan').textContent = scanData.stats.lastScan || 'Never';
        }

        function exportResults() {
            if (scanData.results.length === 0) {
                showAlert('No results to export', 'warning');
                return;
            }
            
            let csv = 'Rank,Title,Score,CCU,Age (Days),Growth (plays/day),URL\n';
            
            scanData.results.forEach((game, index) => {
                csv += `${index + 1},"${game.title}",${game.score},${game.ccu},${game.age},${game.growth},${game.url}\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `signal_scout_results_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            
            showAlert('Results exported successfully', 'success');
        }

        function showAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            alertDiv.style.position = 'fixed';
            alertDiv.style.top = '80px';
            alertDiv.style.right = '20px';
            alertDiv.style.zIndex = '9999';
            alertDiv.style.minWidth = '300px';
            
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 3000);
        }

        function calculateROI() {
            const purchase = parseFloat(document.getElementById('purchasePrice').value) || 0;
            const revenue = parseFloat(document.getElementById('monthlyRevenue').value) || 0;
            const costs = parseFloat(document.getElementById('monthlyCosts').value) || 0;
            
            const netMonthly = revenue - costs;
            const payback = netMonthly > 0 ? (purchase / netMonthly) : 0;
            const roi = purchase > 0 ? ((netMonthly * 12 / purchase) * 100) : 0;
            
            document.getElementById('paybackPeriod').textContent = payback > 0 ? `${payback.toFixed(1)} months` : 'N/A';
            document.getElementById('annualROI').textContent = `${roi.toFixed(1)}%`;
        }

        function calculateGrowth() {
            const current = parseFloat(document.getElementById('currentPlays').value) || 0;
            const rate = parseFloat(document.getElementById('growthRate').value) || 0;
            const days = parseInt(document.getElementById('projectionDays').value) || 0;
            
            const projected = current * Math.pow(1 + (rate / 100), days);
            
            document.getElementById('projectedPlays').textContent = projected.toLocaleString(undefined, {maximumFractionDigits: 0});
        }

        function calculateValue() {
            const plays = parseFloat(document.getElementById('valuePlays').value) || 0;
            const ccu = parseFloat(document.getElementById('valueCCU').value) || 0;
            const age = parseFloat(document.getElementById('valueAge').value) || 0;
            
            const baseValue = (plays / 1000) * 0.5;
            const ccuMultiplier = Math.log10(ccu + 1) * 100;
            const ageFactor = age > 0 ? 1 - (age / 365) * 0.5 : 0;
            
            const estimate = (baseValue + ccuMultiplier) * Math.max(ageFactor, 0.3);
            
            document.getElementById('estimatedValue').textContent = `${estimate.toLocaleString(undefined, {maximumFractionDigits: 0})}`;
        }

        window.addEventListener('click', function(e) {
            if (e.target === document.getElementById('gameModal')) {
                closeModal();
            }
        });

        renderKeywords();
    </script>
</body>
</html>
